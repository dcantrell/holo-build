RPM package
    >> lead section:
        RPM format version 3.0
        Type: 0 (0 = binary, 1 = source)
        Architecture: 0 (0 = noarch, 1 = x86 (also x86-64), 2 = Alpha, 3 = Sparc, 4 = MIPS, 5 = PPC, ..., 9 = IA-64, 12 = ARM, ...)
        Name: foo-1.0.2.3-1
        Built for OS: 1 (1 = Linux, ...)
        Signature type: 5
    >> signature section: format version 1, 5 entries, 81 bytes of data
        tag 62 (HEADERSIGNATURES): length 16
            00000000  00 00 00 3e 00 00 00 07  ff ff ff b0 00 00 00 10  |...>............|
        tag 269 (SHA1): length 1
            string: 8df744754b99789acbe9f3dbd7d4786a19256a44
        tag 1000 (SIZE): length 1
            int32: 2622 = 0xA3E = 0o5076
        tag 1004 (MD5): length 16
            00000000  db 7d 16 e1 1b 68 e3 d3  eb 28 fa bb 67 8e 0a 2c  |.}...h...(..g..,|
        tag 1007 (PAYLOADSIZE): length 1
            int32: 2316 = 0x90C = 0o4414
    >> header section: format version 1, 48 entries, 1136 bytes of data
        tag 63 (HEADERIMMUTABLE): length 16
            00000000  00 00 00 3f 00 00 00 07  ff ff fd 00 00 00 00 10  |...?............|
        tag 100 (HEADERI18NTABLE): length 1
            string: C
        tag 1000 (NAME): length 1
            string: foo
        tag 1001 (VERSION): length 1
            string: 1.0.2.3
        tag 1002 (RELEASE): length 1
            string: 1
        tag 1004 (SUMMARY): length 1
            translatable string: my foo bar package
        tag 1005 (DESCRIPTION): length 1
            translatable string: my foo bar package
        tag 1009 (SIZE): length 1
            int32: 38141 = 0x94FD = 0o112375
        tag 1014 (LICENSE): length 1
            string: None
        tag 1015 (PACKAGER): length 1
            string: Holo Build <holo.build@example.org>
        tag 1016 (GROUP): length 1
            translatable string: System/Management
        tag 1021 (OS): length 1
            string: linux
        tag 1022 (ARCH): length 1
            string: noarch
        tag 1024 (POSTIN): length 1
            string: chown foouser:foogroup /etc/files/foo.toml
            echo setup
            echo setup
            echo setup 1
            echo setup 2
            echo setup 2
        tag 1026 (POSTUN): length 1
            string: echo cleanup
            echo cleanup
            echo cleanup 1
            echo cleanup 1
            echo cleanup 2
        tag 1028 (FILESIZES): length 7
            int32: 0 = 0x0 = 0o0
            int32: 8 = 0x8 = 0o10
            int32: 1240 = 0x4D8 = 0o2330
            int32: 10 = 0xA = 0o12
            int32: 19 = 0x13 = 0o23
            int32: 4096 = 0x1000 = 0o10000
            int32: 4096 = 0x1000 = 0o10000
        tag 1030 (FILEMODES): length 7
            int16: -32348 = 0x81A4 = 0o100644
            int16: -32348 = 0x81A4 = 0o100644
            int16: -32348 = 0x81A4 = 0o100644
            int16: -24065 = 0xA1FF = 0o120777
            int16: -24065 = 0xA1FF = 0o120777
            int16: 16832 = 0x41C0 = 0o40700
            int16: 16877 = 0x41ED = 0o40755
        tag 1033 (FILERDEVS): length 7
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
            int16: 0 = 0x0 = 0o0
        tag 1034 (FILEMTIMES): length 7
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
        tag 1035 (FILEMD5S): length 7
            string: d41d8cd98f00b204e9800998ecf8427e
            string: 5fb7ba7e8447a836e774b66155f5776a
            string: 15dfaf6e4d94d2bf189ea1bed8ea3cd0
            string: 
            string: 
            string: 
            string: 
        tag 1036 (FILELINKTOS): length 7
            string: 
            string: 
            string: 
            string: bar.target
            string: /etc/files/foo.conf
            string: 
            string: 
        tag 1037 (FILEFLAGS): length 7
            int32: 16 = 0x10 = 0o20
            int32: 16 = 0x10 = 0o20
            int32: 16 = 0x10 = 0o20
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
        tag 1039 (FILEUSERNAME): length 7
            string: root
            string: root
            string: root
            string: root
            string: root
            string: 4242
            string: root
        tag 1040 (FILEGROUPNAME): length 7
            string: root
            string: root
            string: root
            string: root
            string: root
            string: 2323
            string: root
        tag 1046 (ARCHIVESIZE): length 1
            int32: 2316 = 0x90C = 0o4414
        tag 1047 (PROVIDENAME): length 2
            string: foo-bar
            string: foo-baz
        tag 1048 (REQUIREFLAGS): length 7
            int32: 12 = 0xC = 0o14
            int32: 2 = 0x2 = 0o2
            int32: 0 = 0x0 = 0o0
            int32: 16777226 = 0x100000A = 0o100000012
            int32: 16777226 = 0x100000A = 0o100000012
            int32: 16777226 = 0x100000A = 0o100000012
            int32: 16777226 = 0x100000A = 0o100000012
        tag 1049 (REQUIRENAME): length 7
            string: bar
            string: bar
            string: baz
            string: rpmlib(VersionedDependencies)
            string: rpmlib(CompressedFileNames)
            string: rpmlib(PayloadIsLzma)
            string: rpmlib(PayloadFilesHavePrefix)
        tag 1050 (REQUIREVERSION): length 7
            string: 2.1
            string: 3.0
            string: 
            string: 3.0.3-1
            string: 3.0.4-1
            string: 4.4.6-1
            string: 4.0-1
        tag 1053 (CONFLICTFLAGS): length 2
            int32: 4 = 0x4 = 0o4
            int32: 10 = 0xA = 0o12
        tag 1054 (CONFLICTNAME): length 2
            string: qux
            string: qux
        tag 1055 (CONFLICTVERSION): length 2
            string: 2.0
            string: 1.2.0
        tag 1086 (POSTINPROG): length 1
            string: /bin/sh
        tag 1088 (POSTUNPROG): length 1
            string: /bin/sh
        tag 1090 (OBSOLETENAME): length 1
            string: foo-bar
        tag 1095 (FILEDEVICES): length 7
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
        tag 1096 (FILEINODES): length 7
            int32: 1 = 0x1 = 0o1
            int32: 2 = 0x2 = 0o2
            int32: 3 = 0x3 = 0o3
            int32: 4 = 0x4 = 0o4
            int32: 5 = 0x5 = 0o5
            int32: 6 = 0x6 = 0o6
            int32: 7 = 0x7 = 0o7
        tag 1097 (FILELANGS): length 7
            string: 
            string: 
            string: 
            string: 
            string: 
            string: 
            string: 
        tag 1112 (PROVIDEFLAGS): length 2
            int32: 0 = 0x0 = 0o0
            int32: 0 = 0x0 = 0o0
        tag 1113 (PROVIDEVERSION): length 2
            string: 
            string: 
        tag 1114 (OBSOLETEFLAGS): length 1
            int32: 2 = 0x2 = 0o2
        tag 1115 (OBSOLETEVERSION): length 1
            string: 2.1
        tag 1116 (DIRINDEXES): length 7
            int32: 0 = 0x0 = 0o0
            int32: 1 = 0x1 = 0o1
            int32: 1 = 0x1 = 0o1
            int32: 2 = 0x2 = 0o2
            int32: 2 = 0x2 = 0o2
            int32: 3 = 0x3 = 0o3
            int32: 3 = 0x3 = 0o3
        tag 1117 (BASENAMES): length 7
            string: empty.toml
            string: foo.conf
            string: foo.toml
            string: bar.conf
            string: foo.conf
            string: bar
            string: baz
        tag 1118 (DIRNAMES): length 4
            string: /etc/
            string: /etc/files/
            string: /etc/links/
            string: /var/lib/foo/
        tag 1124 (PAYLOADFORMAT): length 1
            string: cpio
        tag 1125 (PAYLOADCOMPRESSOR): length 1
            string: lzma
        tag 1126 (PAYLOADFLAGS): length 1
            string: 5
    >> payload: LZMA-compressed cpio archive
        >> ./etc/empty.toml is regular file (mode: 644, owner: 0, group: 0), content is empty file
        >> ./etc/files/foo.conf is regular file (mode: 644, owner: 0, group: 0), content is data as shown below
            foo
            foo
        >> ./etc/files/foo.toml is regular file (mode: 644, owner: 0, group: 0), content is data as shown below
            # This testcase covers all the basic syntax elements of package definitions.
            
            [package]
            name = "foo"
            version = "1.0.2.3"
            description = "my foo bar package"
            author = "Holo Build <holo.build@example.org>"
            requires = ["bar>=2.1", "bar<3.0", "baz"]
            provides = ["foo-bar", "foo-baz"]
            conflicts = ["qux>2.0", "qux<=1.2.0"]
            replaces = ["foo-bar<2.1"]
            setupScript = """
            echo setup
            echo setup
            """
            cleanupScript = """
            echo cleanup
            echo cleanup
            """
            
            [[symlink]]
            path = "/etc/links/foo.conf"
            target = "/etc/files/foo.conf"
            
            [[symlink]]
            path = "/etc/links/bar.conf"
            target = "bar.target"
            
            [[directory]]
            path = "/var/lib/foo/bar"
            mode = "0700"
            owner = 4242
            group = 2323
            
            [[directory]]
            path = "/var/lib/foo/baz"
            
            [[file]]
            path = "/etc/files/foo.conf"
            content = """
            foo
            foo
            """
            
            [[file]]
            path = "/etc/files/foo.toml"
            contentFrom = "input.toml" # check handling of relative paths
            owner = "foouser"
            group = "foogroup"
            
            [[file]]
            path = "/etc/empty.toml"
            contentFrom = "/dev/null" # check handling of absolute paths
            
            [[action]]
            on = "setup"
            script = "echo setup 1"
            
            [[action]]
            on = "cleanup"
            script = """
            echo cleanup 1
            echo cleanup 1
            """
            
            [[action]]
            on = "setup"
            script = """
            echo setup 2
            echo setup 2
            """
            
            [[action]]
            on = "cleanup"
            script = "echo cleanup 2"
        >> ./etc/links/bar.conf is symlink to bar.target
        >> ./etc/links/foo.conf is symlink to /etc/files/foo.conf
        >> ./var/lib/foo/bar is directory (mode: 700, owner: 4242, group: 2323)
        >> ./var/lib/foo/baz is directory (mode: 755, owner: 0, group: 0)

